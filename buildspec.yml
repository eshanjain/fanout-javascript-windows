version: 0.2
 
batch:
   fast-fail: false
   build-fanout:
     parallelism: 1
     ignore-failure: false
 
phases:
   install:
     commands:
       - echo 'Install dependencies'
   pre_build:
     commands:
       - echo 'prebuild'
   build:
     commands:
       - echo 'Running JavaScript Tests'
       - codebuild-tests-run --test-command 'npx jest @($env:CODEBUILD_CURRENT_SHARD_FILES -split " ") --runInBand --coverage' --files-search "codebuild-glob-search '**/tests/*.test.js'"

   post_build:
       commands:
         - echo 'Test execution completed'
