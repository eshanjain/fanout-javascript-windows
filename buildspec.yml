version: 0.2
 
 batch:
   fast-fail: false
   build-fanout:
     parallelism: 3
     ignore-failure: false
 
 phases:
   install:
     commands:
       - echo 'Install dependencies'
   pre_build:
     commands:
       - echo 'prebuild'
   build:
     commands:
       - echo 'Running JavaScript Tests'
       - echo $CODEBUILD_TOTAL_SHARDS
       - echo $CODEBUILD_CURRENT_SHARD
       - echo $(codebuild-glob-search '**/test/*.js')
       - codebuild-glob-search '**/test/*.js' | xargs -n 1 echo
       - |
          codebuild-tests-run \
           --test-command 'npx jest --runInBand --coverage $CODEBUILD_CURRENT_SHARD_FILES' \
           --files-search "codebuild-glob-search '**/test/**/*.test.js'" \
           --sharding-strategy 'stability'
   post_build:
       commands:
         - echo 'Test execution completed'
